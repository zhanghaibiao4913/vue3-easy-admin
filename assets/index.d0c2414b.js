import{d as e,r as t,p as s,a as i,E as n,o,c as a,w as r,u as c,b as l,z as d,n as h,e as m,f as p,g as u,N as v,h as f,i as _,j as g,k as b,l as w,m as L,q as E,s as x,t as A,v as V,x as y}from"./vendor.b61e36dd.js";if("undefined"!=typeof window){let e=function(){let e=document.body,t=document.getElementById("__svg__icons__dom__1641624906058__");t||(t=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.style.position="absolute",t.style.width="0",t.style.height="0",t.id="__svg__icons__dom__1641624906058__"),t.innerHTML='<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-avatar"><path d="M512 0a512 512 0 1 0 512 512A512 512 0 0 0 512 0zM213.333 832A298.667 298.667 0 0 1 512 533.333a170.667 170.667 0 1 1 170.667-170.666A170.667 170.667 0 0 1 512 533.333 298.667 298.667 0 0 1 810.667 832z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-fullscreen-exit"><path d="M313.6 358.4H177.067c-17.067 0-32 14.933-32 32s14.933 32 32 32H390.4c4.267 0 8.533 0 10.667-2.133C409.6 416 416 411.733 418.133 403.2c2.134-4.267 2.134-8.533 2.134-10.667V179.2c0-17.067-14.934-32-32-32s-32 14.933-32 32v136.533L172.8 125.867c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8L313.6 358.4zm381.867 292.267H832c17.067 0 32-14.934 32-32s-14.933-32-32-32H618.667c-4.267 0-8.534 0-10.667 2.133-8.533 4.267-14.933 8.533-17.067 17.067-2.133 4.266-2.133 8.533-2.133 10.666v213.334c0 17.066 14.933 32 32 32s32-14.934 32-32V693.333l200.533 200.534c6.4 6.4 14.934 8.533 23.467 8.533s17.067-2.133 23.467-8.533c12.8-12.8 12.8-32 0-44.8l-204.8-198.4zm-260.267-44.8c-4.267-8.534-8.533-14.934-17.067-17.067-4.266-2.133-8.533-2.133-10.666-2.133H192c-17.067 0-32 14.933-32 32s14.933 32 32 32h136.533L128 851.2c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 14.933 8.533 23.467 8.533s17.066-2.133 23.466-8.533l200.534-200.533V832c0 17.067 14.933 32 32 32s32-14.933 32-32V618.667c-2.134-4.267-2.134-8.534-4.267-12.8zM603.733 403.2c4.267 8.533 8.534 14.933 17.067 17.067 4.267 2.133 8.533 2.133 10.667 2.133H844.8c17.067 0 32-14.933 32-32s-14.933-32-32-32H708.267L896 170.667c12.8-12.8 12.8-32 0-44.8-12.8-12.8-32-12.8-44.8 0L663.467 313.6V177.067c0-17.067-14.934-32-32-32s-32 14.933-32 32V390.4c2.133 4.267 2.133 8.533 4.266 12.8z" fill="#707070" /></symbol><symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-fullscreen"><path d="M370.688 892.416H194.56c-34.816 0-63.488-28.16-63.488-63.488V651.264c0-15.872 15.36-28.672 31.232-28.672s31.232 12.8 31.232 28.672v172.544c0 3.072 2.56 5.632 5.632 5.632h171.008c15.872 0 29.184 15.36 29.184 31.232s-12.288 31.744-28.16 31.744h-.512zM162.816 397.824c-15.872 0-31.232-12.8-31.232-28.672V194.56c0-34.816 28.16-63.488 63.488-63.488H371.2c15.872 0 28.672 15.36 28.672 31.232s-12.8 31.232-28.672 31.232H199.68c-3.072 0-5.632 2.56-5.632 5.632V368.64c0 15.872-15.36 29.184-31.232 29.184zM829.44 892.416H654.848c-15.872 0-28.672-15.36-28.672-31.232s12.8-31.232 28.672-31.232H824.32c3.072 0 5.632-2.56 5.632-5.632V651.776c0-15.872 15.36-28.672 31.232-28.672s31.232 12.8 31.232 28.672V829.44c.512 34.816-27.648 62.976-62.976 62.976zm32.256-494.592c-15.872 0-31.232-12.8-31.232-28.672V199.68c0-3.072-2.56-5.632-5.632-5.632H655.36c-15.872 0-28.672-15.36-28.672-31.232s12.8-31.232 28.672-31.232h174.08c34.816 0 63.488 28.16 63.488 63.488V368.64c0 15.872-15.36 29.184-31.232 29.184z" fill="#707070" /></symbol><symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-goods"><path d="M691.2 870.4h-384c-14.336 0-25.6-11.264-25.6-25.6s11.264-25.6 25.6-25.6h384c14.336 0 25.6 11.264 25.6 25.6s-11.264 25.6-25.6 25.6z" /><path d="M874.496 998.4H149.504c-42.496 0-76.8-34.304-76.8-76.8l.512-7.168 58.368-614.4c3.584-39.936 36.352-69.632 76.288-69.632h608.256c39.936 0 72.704 29.696 76.288 69.632l58.368 614.4c2.048 20.48-4.096 40.448-17.408 56.32-12.8 15.872-31.744 25.6-52.224 27.648h-6.656zM207.872 281.6a25.6 25.6 0 0 0-25.6 23.04l-58.368 614.4c0 16.384 11.264 28.16 25.6 28.16h724.48c9.216-1.024 15.36-4.096 19.968-9.216s6.144-11.776 5.632-18.432l-58.368-614.4a25.242 25.242 0 0 0-25.6-23.04H207.872z" /><path d="M716.8 384c-14.336 0-25.6-11.264-25.6-25.6V256c0-98.816-80.384-179.2-179.2-179.2S332.8 157.184 332.8 256v102.4c0 14.336-11.264 25.6-25.6 25.6s-25.6-11.264-25.6-25.6V256c0-126.976 103.424-230.4 230.4-230.4S742.4 129.024 742.4 256v102.4c0 14.336-11.264 25.6-25.6 25.6z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-home"><path d="m969.6 502.4-118.4-112L528 89.6c-9.6-9.6-22.4-9.6-32 0L182.4 387.2l-9.6 9.6-118.4 112c-9.6 9.6-9.6 22.4 0 32s22.4 9.6 32 0l83.2-80v393.6c0 48 41.6 89.6 92.8 89.6h83.2c38.4 0 70.4-28.8 70.4-67.2V659.2h198.4v217.6c0 35.2 32 67.2 70.4 67.2H768c51.2 0 92.8-38.4 92.8-89.6V457.6l80 73.6c9.6 9.6 22.4 9.6 32 0 6.4-6.4 6.4-19.2-3.2-28.8zm-160 355.2c0 25.6-19.2 44.8-44.8 44.8h-83.2c-12.8 0-22.4-9.6-22.4-22.4V640c0-12.8-9.6-22.4-22.4-22.4H393.6c-12.8 0-22.4 9.6-22.4 22.4v240c0 12.8-9.6 22.4-22.4 22.4h-83.2c-25.6 0-44.8-19.2-44.8-44.8V419.2l294.4-281.6 294.4 281.6v438.4z" /></symbol><symbol class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" id="icon-order"><path d="M709.047 961.03H251.334c-67.49 0-122.18-53.299-122.18-119.011V243.475c0-65.743 54.689-119.011 122.18-119.011V64.959h61.09v59.504h123.232V64.959h61.092v59.504h151.208V64.959h61.089v59.504c67.49 0 122.21 53.268 122.21 119.01V842.02c.001 65.712-54.716 119.01-122.208 119.01zm61.115-717.554c0-32.874-27.369-59.506-61.116-59.506H251.334c-33.747 0-61.09 26.632-61.09 59.506V842.02c0 32.869 27.345 59.504 61.09 59.504h457.714c33.747 0 61.116-26.635 61.116-59.504l-.002-598.545zM678.5 779.016H281.88c-16.87 0-30.547-13.32-30.547-29.753s13.673-29.751 30.547-29.751h396.62c16.871 0 30.547 13.318 30.547 29.75 0 16.435-13.675 29.754-30.547 29.754zm0-178.513H281.88c-16.87 0-30.547-13.318-30.547-29.753 0-16.435 13.673-29.753 30.547-29.753h396.62c16.871 0 30.547 13.32 30.547 29.753 0 16.435-13.675 29.753-30.547 29.753zm0-178.517H281.88c-16.87 0-30.547-13.318-30.547-29.752s13.673-29.751 30.547-29.751h396.62c16.871 0 30.547 13.32 30.547 29.75 0 16.436-13.675 29.753-30.547 29.753z" /></symbol>',e.insertBefore(t,e.firstChild)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}var z=e({setup(e){const m=t(!0),p=d;return s("reload",(()=>{m.value=!1,h((()=>{m.value=!0}))})),(e,t)=>{const s=i("router-view"),d=n;return o(),a(d,{locale:c(p)},{default:r((()=>[m.value?(o(),a(s,{key:0})):l("",!0)])),_:1},8,["locale"])}}});const T=m.create({baseURL:"https://www.fastmock.site/mock/17d3c111efd563c72cf24734a2610e7b/admin",timeout:Number("6000"),headers:{"Content-Type":"application/json;charset=UTF-8"}});T.interceptors.request.use((e=>{const t=N();return t.token&&e.headers&&(e.headers.authorization=t.token),e}),(e=>Promise.reject(e))),T.interceptors.response.use((e=>{const t=e.headers.authorization;if(t){N().setToken(t)}const{status:s,data:i}=e;if(200===s){const{code:e,message:t}=i;return 0===e?i:(p.error(t||"接口请求异常"),Promise.reject(i))}return p.error(`${s}服务器响应异常`),Promise.reject(i)}),(e=>{const{response:t,code:s,message:i,config:n}=e;if(t){const{_retry:e}=n,{status:o,data:a}=t;"ECONNABORTED"!==s||-1===i.indexOf("timeout")||e?p.error(`${o}${a.message||"error"}`):p.error("连接超时，请稍后重试")}else p.error("连接失败，请检查网络");return Promise.reject(e)}));const O=e=>T.request(e),k=(e,t)=>O({url:"/user/login",method:"post",data:{account:e,passwaord:t}});let H;const R={},S=function(e,t){if(!t||0===t.length)return e();if(void 0===H){const e=document.createElement("link").relList;H=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`./${e}`)in R)return;R[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":H,t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t?new Promise(((e,t)=>{i.addEventListener("load",e),i.addEventListener("error",t)})):void 0}))).then((()=>e()))},I=()=>S((()=>import("./index.facab154.js")),["assets/index.facab154.js","assets/index.826c2626.css","assets/el-button.618a4f1c.css","assets/el-icon.954f8350.css","assets/vendor.b61e36dd.js","assets/vendor.38705094.css"]);var P=[{path:"/goods",redict:{name:"GoodsList"},component:I,meta:{title:"商品管理",icon:"goods"},children:[{name:"GoodsList",path:"/goods-list",component:()=>S((()=>import("./index.4d60def7.js")),["assets/index.4d60def7.js","assets/vendor.b61e36dd.js","assets/vendor.38705094.css"]),meta:{title:"商品列表",code:"A"}},{name:"GoodsBrand",path:"/brand",redirect:{name:"BrandList"},component:null,meta:{title:"品牌管理"},children:[{name:"BrandList",path:"/brand-list",component:()=>S((()=>import("./index.343b67e8.js")),["assets/index.343b67e8.js","assets/vendor.b61e36dd.js","assets/vendor.38705094.css"]),meta:{title:"品牌列表",code:"B"}},{name:"BrandOperation",path:"/brand-operation",component:()=>S((()=>import("./index.8feb7cf4.js")),["assets/index.8feb7cf4.js","assets/vendor.b61e36dd.js","assets/vendor.38705094.css"]),meta:{title:"品牌运营",code:"C"}}]}]},{path:"/order",redict:{name:"SaleOrderList"},component:I,meta:{title:"订单管理",icon:"order"},children:[{name:"SaleOrderList",path:"/sale-order-list",component:()=>S((()=>import("./index.2751d490.js")),["assets/index.2751d490.js","assets/vendor.b61e36dd.js","assets/vendor.38705094.css"]),meta:{title:"销售订单",code:"D"}},{name:"PurchaseOrderList",path:"/purchase-order-list",component:()=>S((()=>import("./index.9450ab74.js")),["assets/index.9450ab74.js","assets/vendor.b61e36dd.js","assets/vendor.38705094.css"]),meta:{title:"采购订单",code:"E"}}]}];const M=()=>S((()=>import("./index.facab154.js")),["assets/index.facab154.js","assets/index.826c2626.css","assets/el-button.618a4f1c.css","assets/el-icon.954f8350.css","assets/vendor.b61e36dd.js","assets/vendor.38705094.css"]);var j=[{name:"Login",path:"/login",component:()=>S((()=>import("./index.6e4bc169.js")),["assets/index.6e4bc169.js","assets/index.da641cf6.css","assets/el-button.618a4f1c.css","assets/el-icon.954f8350.css","assets/vendor.b61e36dd.js","assets/vendor.38705094.css"]),meta:{title:"登录",auth:!1,hideMenu:!0}},{path:"/",redirect:{name:"Home"},component:M,meta:{title:"首页",icon:"home"},children:[{name:"Home",path:"/home",component:()=>S((()=>import("./index.df6afa24.js")),["assets/index.df6afa24.js","assets/vendor.b61e36dd.js","assets/vendor.38705094.css"]),meta:{title:"首页",affix:!0}}]},{path:"/redirect",redirect:{name:"Redirects"},component:M,children:[{path:"/redirects",name:"Redirects",component:()=>S((()=>import("./index.47d6d34b.js")),["assets/index.47d6d34b.js","assets/vendor.b61e36dd.js","assets/vendor.38705094.css"]),meta:{title:"-",hideMenu:!0}}]},{path:"/:catchAll(.*)",name:"NotFound",component:()=>S((()=>import("./404.8be5d663.js")),["assets/404.8be5d663.js","assets/404.e3dc4d74.css","assets/el-button.618a4f1c.css","assets/vendor.b61e36dd.js","assets/vendor.38705094.css"]),meta:{title:"404",hideMenu:!0}}];const D=(e,t=new WeakMap)=>{if(null===e)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if("object"!=typeof e)return e;if(t.get(e))return t.get(e);const s=new e.constructor;t.set(e,s);for(const i in e)e.hasOwnProperty(i)&&(s[i]=D(e[i],t));return s},B=(e,t=[])=>(e.forEach((e=>{e.children?B(e.children,t):t.push(e)})),t),C=u({id:"tabs",state:()=>({tabList:[],keepAliveList:[]}),persist:{enabled:!0},actions:{addTab(e){var t;if(null==(t=e.meta)?void 0:t.hideMenu)return;-1===this.tabList.findIndex((t=>t.name===e.name))&&this.tabList.push(D(e)),this.updateKeepAlive()},removeTab(e){const t=this.tabList.findIndex((t=>t.name===e));t>-1&&this.tabList.splice(t,1),this.updateKeepAlive()},removeOtherTab(e){this.tabList.forEach(((t,s)=>{var i;(null==(i=t.meta)?void 0:i.affix)||t.name===e||this.tabList.splice(s,1)})),this.updateKeepAlive()},removeAll(){this.tabList=this.tabList.filter((e=>{var t;return null==(t=e.meta)?void 0:t.affix})),this.updateKeepAlive()},removeLeftRight(e,t){const s=this.tabList.findIndex((e=>e.name===t));-1!==s&&this.tabList.forEach(((t,i)=>{var n;(null==(n=t.meta)?void 0:n.affix)||("left"===e?i<s&&this.tabList.splice(i,1):"right"===e&&i>s&&this.tabList.splice(i,1))})),this.updateKeepAlive()},clearTab(){this.tabList=[],this.keepAliveList=[]},updateKeepAlive(){this.keepAliveList=this.tabList.map((e=>{var t;if(!1!==(null==(t=e.meta)?void 0:t.keepAlive))return e.name}))},deleteKeepAlive(e){this.keepAliveList.splice(this.keepAliveList.findIndex((t=>t===e)),1)}}});function K(e,t){for(let s=e.length-1;s>=0;s-=1){const i=e[s];i.children?K(i.children,t):i.meta&&!t.includes(i.meta.code)&&e.splice(s,1)}}const N=u({id:"user",state:()=>({token:"",userInfo:null,permissionCodes:[],permissionRoutes:[]}),persist:{enabled:!0,strategies:[{storage:localStorage,paths:["userInfo"]},{storage:sessionStorage,paths:["token"]}]},getters:{appMenuList:e=>[...j,...e.permissionRoutes]},actions:{setToken(e){this.token=e},setUserInfo(e){this.userInfo=e},async generatePermissionRoutes(){let e=D(P);const{data:t}=await O({url:"/user/permission",method:"get"});return this.permissionCodes=t||[],K(e,this.permissionCodes),this.permissionRoutes=e||[],this.permissionRoutes},logout(){this.setToken(""),this.setUserInfo(null);C().clearTab(),setTimeout((()=>{window.location.reload()}),500)}}});v.configure({easing:"ease",speed:500,showSpinner:!1,trickleSpeed:200,minimum:.3});const q=f({history:_(),routes:[...j]});q.beforeEach((async e=>{v.start();const t=N();if(t.token){if("Login"===e.name)return{name:"Home"};if(0===t.permissionRoutes.length){const s=g.service({text:"加载权限..."});try{const e=await t.generatePermissionRoutes();(e=>{const t=[];return e.forEach(((e,s)=>{t.push(D(e)),e.children&&e.children.length&&(t[s].children=[],e.children.forEach((e=>{e.children?t[s].children.push(...B(e.children||[])):t[s].children.push(e)})))})),t})(D(e)).forEach((e=>{q.addRoute(e)}))}catch{t.logout()}finally{s.close()}return e.fullPath}return!0}return void 0!==e.meta.auth&&!0!==e.meta.auth||{name:"Login"}})),q.afterEach((e=>{var t;v.done();const s="后台管理系统",i=(null==(t=e.meta)?void 0:t.title)?`${e.meta.title}-后台管理系统`:s;document.title=i}));const $=b();$.use(w);const U=u({id:"app",state:()=>({uiSize:"mini",isShowTabs:!0,menuWidth:200,uniqueOpened:!1,enableKeepAlive:!0}),persist:{enabled:!0,strategies:[{storage:localStorage,paths:["isShowTabs","menuWidth","uiSize","uniqueOpened","enableKeepAlive","enablePermission"]}]},actions:{toggleTabsShow(){this.isShowTabs=!this.isShowTabs},updateMenuWidth(e){this.menuWidth=e},updateUiSize(e){this.uiSize=e},toggleUniquiOpened(){this.uniqueOpened=!this.uniqueOpened},toggleKeepAlive(){this.enableKeepAlive=!this.enableKeepAlive}}});var W=e({name:"SvgIcon",props:{name:{type:String,required:!0},className:{type:String,default:""}},setup:e=>({iconName:L((()=>`#icon-${e.name}`)),svgClass:L((()=>e.className?`svg-icon ${e.className}`:"svg-icon"))})});const G=x("data-v-6ce3f6ca")(((e,t,s,i,n,r)=>(o(),a("svg",{class:e.svgClass,"aria-hidden":"true"},[E("use",{"xlink:href":e.iconName},null,8,["xlink:href"])],2))));W.render=G,W.__scopeId="data-v-6ce3f6ca";const F=A(z);F.use($);const J=U();F.use(V,{size:J.uiSize,zIndex:3e3}),Object.keys(y).forEach((e=>{F.component(e,y[e])})),F.component("svg-icon",W),F.use((function(e){e.directive("auth",{mounted:(e,t)=>{var s;s=t.value,(N().permissionCodes||[]).includes(s)||e.remove()}})})),F.use(q),F.mount("#app");export{W as _,U as a,N as b,k as l,C as u};
