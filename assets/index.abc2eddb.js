import{d as e,r as t,p as s,a as i,o as n,c as o,b as a,n as r,e as c,N as l,f as d,g as m,E as h,h as p,i as u,j as _,k as f,w as v,l as g,m as E,z as b,q as L}from"./vendor.9fa8aa7d.js";if("undefined"!=typeof window){let e=function(){let e=document.body,t=document.getElementById("__svg__icons__dom__1641439229012__");t||(t=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.style.position="absolute",t.style.width="0",t.style.height="0",t.id="__svg__icons__dom__1641439229012__"),t.innerHTML='<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-avatar"><path d="M512 0a512 512 0 1 0 512 512A512 512 0 0 0 512 0zM213.333 832A298.667 298.667 0 0 1 512 533.333a170.667 170.667 0 1 1 170.667-170.666A170.667 170.667 0 0 1 512 533.333 298.667 298.667 0 0 1 810.667 832z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-goods"><path d="M691.2 870.4h-384c-14.336 0-25.6-11.264-25.6-25.6s11.264-25.6 25.6-25.6h384c14.336 0 25.6 11.264 25.6 25.6s-11.264 25.6-25.6 25.6z" /><path d="M874.496 998.4H149.504c-42.496 0-76.8-34.304-76.8-76.8l.512-7.168 58.368-614.4c3.584-39.936 36.352-69.632 76.288-69.632h608.256c39.936 0 72.704 29.696 76.288 69.632l58.368 614.4c2.048 20.48-4.096 40.448-17.408 56.32-12.8 15.872-31.744 25.6-52.224 27.648h-6.656zM207.872 281.6a25.6 25.6 0 0 0-25.6 23.04l-58.368 614.4c0 16.384 11.264 28.16 25.6 28.16h724.48c9.216-1.024 15.36-4.096 19.968-9.216s6.144-11.776 5.632-18.432l-58.368-614.4a25.242 25.242 0 0 0-25.6-23.04H207.872z" /><path d="M716.8 384c-14.336 0-25.6-11.264-25.6-25.6V256c0-98.816-80.384-179.2-179.2-179.2S332.8 157.184 332.8 256v102.4c0 14.336-11.264 25.6-25.6 25.6s-25.6-11.264-25.6-25.6V256c0-126.976 103.424-230.4 230.4-230.4S742.4 129.024 742.4 256v102.4c0 14.336-11.264 25.6-25.6 25.6z" /></symbol><symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-home"><path d="m969.6 502.4-118.4-112L528 89.6c-9.6-9.6-22.4-9.6-32 0L182.4 387.2l-9.6 9.6-118.4 112c-9.6 9.6-9.6 22.4 0 32s22.4 9.6 32 0l83.2-80v393.6c0 48 41.6 89.6 92.8 89.6h83.2c38.4 0 70.4-28.8 70.4-67.2V659.2h198.4v217.6c0 35.2 32 67.2 70.4 67.2H768c51.2 0 92.8-38.4 92.8-89.6V457.6l80 73.6c9.6 9.6 22.4 9.6 32 0 6.4-6.4 6.4-19.2-3.2-28.8zm-160 355.2c0 25.6-19.2 44.8-44.8 44.8h-83.2c-12.8 0-22.4-9.6-22.4-22.4V640c0-12.8-9.6-22.4-22.4-22.4H393.6c-12.8 0-22.4 9.6-22.4 22.4v240c0 12.8-9.6 22.4-22.4 22.4h-83.2c-25.6 0-44.8-19.2-44.8-44.8V419.2l294.4-281.6 294.4 281.6v438.4z" /></symbol><symbol class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" id="icon-order"><path d="M709.047 961.03H251.334c-67.49 0-122.18-53.299-122.18-119.011V243.475c0-65.743 54.689-119.011 122.18-119.011V64.959h61.09v59.504h123.232V64.959h61.092v59.504h151.208V64.959h61.089v59.504c67.49 0 122.21 53.268 122.21 119.01V842.02c.001 65.712-54.716 119.01-122.208 119.01zm61.115-717.554c0-32.874-27.369-59.506-61.116-59.506H251.334c-33.747 0-61.09 26.632-61.09 59.506V842.02c0 32.869 27.345 59.504 61.09 59.504h457.714c33.747 0 61.116-26.635 61.116-59.504l-.002-598.545zM678.5 779.016H281.88c-16.87 0-30.547-13.32-30.547-29.753s13.673-29.751 30.547-29.751h396.62c16.871 0 30.547 13.318 30.547 29.75 0 16.435-13.675 29.754-30.547 29.754zm0-178.513H281.88c-16.87 0-30.547-13.318-30.547-29.753 0-16.435 13.673-29.753 30.547-29.753h396.62c16.871 0 30.547 13.32 30.547 29.753 0 16.435-13.675 29.753-30.547 29.753zm0-178.517H281.88c-16.87 0-30.547-13.318-30.547-29.752s13.673-29.751 30.547-29.751h396.62c16.871 0 30.547 13.32 30.547 29.75 0 16.436-13.675 29.753-30.547 29.753z" /></symbol>',e.insertBefore(t,e.firstChild)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}var w=e({setup(e){const c=t(!0);return s("reload",(()=>{c.value=!1,r((()=>{c.value=!0}))})),(e,t)=>{const s=i("router-view");return c.value?(n(),o(s,{key:0})):a("",!0)}}});const A=(e,t)=>(console.log(e,t),new Promise((e=>{setTimeout((()=>{e({userInfo:{id:"2849028540935234824098",name:"张三"},token:"OIWEJKDSUIERERJAJFIETRTEPWESJFSK"})}),1500)})));let S;const R={},O=function(e,t){if(!t||0===t.length)return e();if(void 0===S){const e=document.createElement("link").relList;S=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`./${e}`)in R)return;R[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":S,t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t?new Promise(((e,t)=>{i.addEventListener("load",e),i.addEventListener("error",t)})):void 0}))).then((()=>e()))},T=()=>O((()=>import("./index.1a6ffee5.js")),["assets/index.1a6ffee5.js","assets/index.c11e29fd.css","assets/vendor.9fa8aa7d.js"]);var I=[{path:"/goods",redict:{name:"GoodsList"},component:T,meta:{title:"商品管理",icon:"goods"},children:[{name:"GoodsList",path:"/goods-list",component:()=>O((()=>import("./index.a6df664a.js")),["assets/index.a6df664a.js","assets/vendor.9fa8aa7d.js"]),meta:{title:"商品列表",code:"ZH_GOODS_LIST"}},{name:"GoodsBrand",path:"/brand",redirect:{name:"BrandList"},component:null,meta:{title:"品牌管理"},children:[{name:"BrandList",path:"/brand-list",component:()=>O((()=>import("./index.065b3842.js")),["assets/index.065b3842.js","assets/vendor.9fa8aa7d.js"]),meta:{title:"品牌列表",code:"ZH_BRAND_LIST"}},{name:"BrandOperation",path:"/brand-operation",component:()=>O((()=>import("./index.088411fc.js")),["assets/index.088411fc.js","assets/vendor.9fa8aa7d.js"]),meta:{title:"品牌运营",code:"ZH_BRAND_OPERATION"}}]}]},{path:"/order",redict:{name:"SaleOrderList"},component:T,meta:{title:"订单管理",icon:"order"},children:[{name:"SaleOrderList",path:"/sale-order-list",component:()=>O((()=>import("./index.95bb7a34.js")),["assets/index.95bb7a34.js","assets/vendor.9fa8aa7d.js"]),meta:{title:"销售订单",code:"ZH_SALE_ORDER_LIST"}},{name:"PurchaseOrderList",path:"/purchase-order-list",component:()=>O((()=>import("./index.9f74c10b.js")),["assets/index.9f74c10b.js","assets/vendor.9fa8aa7d.js"]),meta:{title:"采购订单",code:"ZH_PURCHASE_ORDER_LIST"}}]}];const x=()=>O((()=>import("./index.1a6ffee5.js")),["assets/index.1a6ffee5.js","assets/index.c11e29fd.css","assets/vendor.9fa8aa7d.js"]);var P=[{name:"Login",path:"/login",component:()=>O((()=>import("./index.7e51717f.js")),["assets/index.7e51717f.js","assets/index.83aec56c.css","assets/vendor.9fa8aa7d.js"]),meta:{title:"登录",auth:!1,hideMenu:!0}},{path:"/",redirect:{name:"Home"},component:x,meta:{title:"首页",icon:"home"},children:[{name:"Home",path:"/home",component:()=>O((()=>import("./index.68a6dd0f.js")),["assets/index.68a6dd0f.js","assets/vendor.9fa8aa7d.js"]),meta:{title:"首页",affix:!0}}]},{path:"/redirect",redirect:{name:"Redirects"},component:x,children:[{path:"/redirects",name:"Redirects",component:()=>O((()=>import("./index.6ea459b8.js")),["assets/index.6ea459b8.js","assets/vendor.9fa8aa7d.js"]),meta:{title:"-",hideMenu:!0}}]},{path:"/:catchAll(.*)",name:"NotFound",component:()=>O((()=>import("./404.5f20f7a0.js")),["assets/404.5f20f7a0.js","assets/404.e3dc4d74.css","assets/vendor.9fa8aa7d.js"]),meta:{title:"404",hideMenu:!0}}];const y=(e,t=new WeakMap)=>{if(null===e)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if("object"!=typeof e)return e;if(t.get(e))return t.get(e);const s=new e.constructor;t.set(e,s);for(const i in e)e.hasOwnProperty(i)&&(s[i]=y(e[i],t));return s},D=(e,t=[])=>(e.forEach((e=>{e.children?D(e.children,t):t.push(e)})),t),H=c({id:"tabs",state:()=>({tabList:[],keepAliveList:[]}),persist:{enabled:!0},actions:{addTab(e){if(e.meta.hideMenu)return;-1===this.tabList.findIndex((t=>t.name===e.name))&&this.tabList.push(y(e)),this.updateKeepAlive()},removeTab(e){const t=this.tabList.findIndex((t=>t.name===e));t>-1&&this.tabList.splice(t,1),this.updateKeepAlive()},removeOtherTab(e){this.tabList.forEach(((t,s)=>{t.meta.affix||t.name===e||this.tabList.splice(s,1),this.updateKeepAlive()}))},removeAll(){this.tabList=this.tabList.filter((e=>e.meta.affix)),this.updateKeepAlive()},clearTab(){this.tabList=[],this.updateKeepAlive()},updateKeepAlive(){this.keepAliveList=this.tabList.map((e=>{if(!1!==e.meta.keepAlive)return e.name}))},deleteKeepAlive(e){this.keepAliveList.splice(this.keepAliveList.findIndex((t=>t===e)),1)}}});function V(e,t){for(let s=e.length-1;s>=0;s-=1){const i=e[s];i.children?V(i.children,t):i.meta&&!t.includes(i.meta.code)&&e.splice(s,1)}}const k=c({id:"user",state:()=>({token:"",userInfo:{id:"",name:""},permissionCodes:[],permissionRoutes:[]}),persist:{enabled:!0,strategies:[{storage:localStorage,paths:["userInfo"]},{storage:sessionStorage,paths:["token"]}]},getters:{appMenuList:e=>[...P,...e.permissionRoutes]},actions:{setToken(e){this.token=e},setUserInfo(e){this.userInfo=e},async generatePermissionRoutes(){let e=y(I);const t=await new Promise((e=>{setTimeout((()=>{e(["ZH_GOODS_LIST","ZH_SALE_ORDER_LIST","ZH_PURCHASE_ORDER_LIST","ZH_BRAND_LIST","ZH_BRAND_OPERATION"])}),1500)}));return this.permissionCodes=t||[],V(e,this.permissionCodes),this.permissionRoutes=e,e},logout(){this.setToken(""),this.setUserInfo(null);H().clearTab(),window.location.reload()}}});l.configure({easing:"ease",speed:500,showSpinner:!1,trickleSpeed:200,minimum:.3});const z=d({history:m(),routes:[...P]});z.beforeEach((async e=>{l.start();const t=k();if(t.token){if("Login"===e.name)return{name:"Home"};if(0===t.permissionRoutes.length){const s=h.service({text:"加载权限数据"}),i=await t.generatePermissionRoutes();return(e=>{const t=[];return e.forEach(((e,s)=>{t.push(y(e)),e.children&&e.children.length&&(t[s].children=[],e.children.forEach((e=>{e.children?t[s].children.push(...D(e.children||[])):t[s].children.push(e)})))})),t})(y(i)).forEach((e=>{z.addRoute(e)})),s.close(),e.fullPath}return!0}return void 0!==e.meta.auth&&!0!==e.meta.auth||{name:"Login"}})),z.afterEach((e=>{var t;l.done();const s="后台管理系统",i=(null==(t=e.meta)?void 0:t.title)?`${e.meta.title}-后台管理系统`:s;document.title=i}));const M=p();M.use(u);const j=c({id:"app",state:()=>({uiSize:"mini",isShowTabs:!0,menuWidth:200,uniqueOpened:!1,enableKeepAlive:!0}),persist:{enabled:!0,strategies:[{storage:localStorage,paths:["isShowTabs","menuWidth","uiSize","uniqueOpened","enableKeepAlive","enablePermission"]}]},actions:{toggleTabsShow(){this.isShowTabs=!this.isShowTabs},updateMenuWidth(e){this.menuWidth=e},updateUiSize(e){this.uiSize=e},toggleUniquiOpened(){this.uniqueOpened=!this.uniqueOpened},toggleKeepAlive(){this.enableKeepAlive=!this.enableKeepAlive},togglePermission(){this.enablePermission=!this.enablePermission}}});var B=e({name:"SvgIcon",props:{name:{type:String,required:!0},className:{type:String,default:""}},setup:e=>({iconName:_((()=>`#icon-${e.name}`)),svgClass:_((()=>e.className?`svg-icon ${e.className}`:"svg-icon"))})});const K=v("data-v-4838c736")(((e,t,s,i,a,r)=>(n(),o("svg",{class:e.svgClass,"aria-hidden":"true"},[f("use",{"xlink:href":e.iconName},null,8,["xlink:href"])],2))));B.render=K,B.__scopeId="data-v-4838c736";const N=g(w);N.use(M);const C=j();N.use(E,{size:C.uiSize,zIndex:3e3,locale:b}),Object.keys(L).forEach((e=>{N.component(e,L[e])})),N.component("svg-icon",B),N.use((function(e){e.directive("auth",{mounted:(e,t)=>{var s;s=t.value,(k().permissionCodes||[]).includes(s)||e.remove()}})})),N.use(z),N.mount("#app");export{j as a,k as b,A as l,H as u};
